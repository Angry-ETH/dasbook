# DAS 网络设计

DAS 的基本原理很简单：采样节点通过向数据持有者随机采样验证这些数据是否可用。在这个过程中，数据不仅被验证，也被分散地存储在网络中。由于采样数量是固定的，与数据总量无关，因此采样节点越多，网络整体可支撑的数据量越大。这一特性突破了传统区块链节点同步的瓶颈，使得网络可扩展性不再受限于网络规模，标志着一种新的区块链范式。

在实践中，数据首先需要被分散到网络中，理想状态忽略了网络结构与数据传播的复杂性。在真实环境中，随着节点数量的增加与数据体积的膨胀，数据的扩散速度与查询效率将成为系统性能的关键瓶颈。造成这一现象的根本原因一方面来源于直觉上的“节点越多越慢”，另外的原因还包括：

- 采样操作是随机的，缺乏结构化的查询机制；
- 节点之间的传播常依赖广播或泛洪式协议，效率低下；
- 数据传输未能充分利用网络的带宽熵容量，冗余多而信息密度低。

从信息论的角度来看，传统传播方式未能达到网络的最优传输速率上限。线性网络编码提供了理论上的启示，通过对数据块进行线性组合，每一次传输都携带更多信息熵，从而减少总体传播轮次与带宽开销。这种机制启发我们设计更高效的数据调度与冗余消解方案。

目前，在实践中，我们将数据以可查询的方式存储到网络中，并保持节点间的协同交换。我们将整个流程抽象为三个必要的组成部分：

- **分布（Distribute）**：由构建者或其他角色将数据发布至网络，完成最初的播种；
- **保管（Custody）**：部分节点承担保管职责，主动存储一定比例的数据；
- **采样（Sample）**：采样节点从网络中检索指定的数据份额，用于可用性验证。

在这个过程中，保管者不仅是数据的被动接收者，更是活性的提供者。为了完成自身的保管任务，他们需要主动从网络中获取数据，并在他人采样时作为响应节点提供数据。这一互惠结构构成了网络活性的基础。

为了实现高效的“分布—保管—采样”流程，网络层必须满足两个核心能力：

1. **快速扩散能力**：数据在首次发布时需要被快速传播至网络中的多个候选保管者；
2. **高效查询能力**：采样节点需要在已知数据标识的前提下，能迅速定位并请求具体的数据片段。

有两类关键网络协议我们需要权衡：

- **Gossip 协议**：提供鲁棒的广播能力，可在高失效率环境中快速传播数据；
- **DHT 协议**：构建可查询的键值结构，支撑在稀疏网络中高效定位数据。

然而，这两种协议都并非专为 DAS 设计，无法完全满足一些特殊场景下的需求。我们有必要探讨这两类协议的设计原则、适配方式与协同机制。